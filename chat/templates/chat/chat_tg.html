{% load static %}
<html>
<head>
  <meta charset="utf-8">
  <title>WS Debug</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'bootstrap/style/Nurbol.css' %}">
</head>
<body>
  <div class="container-fluid" style="padding: 0;margin: 0;">
    <div class="row g-0">
      
      <div class="col-lg-4" style="background-color: #212529;min-height: 100vh;border-right: 1px solid rgba(255, 255, 255, 0.2);">
        <div class="nav" style="background-color: #212529;height: 60px;">
        </div>
        {% for room in rooms %}
          
            <div data-userrid="user.id" class="chats">
              <img src="{{room.last_message.car.images.first.image.url}}" style="width: 90px;height: 65px;" alt="">
              <div>
                <p style="color: #f1f1f1;">
                  {% if room.user_a != request.user %}
                    {{room.user_a}}
                  {% else %}
                     {{room.user_b}}
                  {% endif %}
                 
                </p>
                <p style="color: #787878ff;">{{room.last_message.text}}</p>
              </div>
              <div>

              </div>
            </div>
          
        {% endfor %}
      </div>

      <div class="col-lg-8">
        <div class="nav" style="background-color: #212529;height: 60px;">
          <p style="color: #ffffffff;;">{{car.owner}}</p>
        </div>
        <div id="chat-container">
          
          <div id="chat-messages" class="chattg-messages">
            {% for msg in messages %}
              <div class="message {% if msg.sender == request.user %}message-sent{% else %}message-received{% endif %}">
                {{msg.text}}  
                {{car.owner}}
              </div>
            {% endfor %}
          </div>
            
          <div class="chattg-input-container">
            <input
              data-car-id="{{ car.id }}"
              data-user-id="{{user.id}}"
              data-current-user-id="{{ request.user.id }}"
              type="text"
              id="chat-input"
              style="height: 50px;width: 500px;border-radius: 30px;padding-left: 10px;align-items: center;background: #f1f1f1;" placeholder="Напишите сообщение...">
            <button type="submit" id="chat-send">Отправить</button>
          </div>

        </div>
      </div>
      
    </div>
  </div>

  <script src="{% static 'bootstrap/style/js/chat_tg.js' %}"></script>
</body>
</html>
